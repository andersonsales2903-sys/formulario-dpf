<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Despertar do Poder Feminino | Inscrição</title>
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Cpath fill='%23DB2777' d='M8 15.6l-.7-.6C1.6 9.8 0 8.3 0 5.3c0-2.3 1.8-4.2 4-4.2 1.6 0 3.1.9 4 2.2 1-.3 2.4-2.2 4-2.2 2.2 0 4 1.9 4 4.2 0 3.1-1.6 4.6-7.3 9.7L8 15.6z'/%3E%3C/svg%3E">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #fce4ec; /* Rosa claro para um toque feminino */
        }
    </style>
    <!-- Meta Tags para pré-visualização em redes sociais (Open Graph e Twitter Cards) -->
    <meta property="og:title" content="Despertar do Poder Feminino - Mentoria e Workshops">
    <meta property="og:description" content="Conecte-se com sua essência, seus ciclos e a força que reside em você. Descubra a beleza da sua jornada e receba novidades sobre mentorias e workshops.">
    <meta property="og:image" content="https://placehold.co/1200x630/e879f9/ffffff?text=Despertar+do+Poder+Feminino">
    <meta property="og:url" content="https://seusite.com/dpf-simone_santos">
    <meta property="og:type" content="website">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Despertar do Poder Feminino - Mentoria e Workshops">
    <meta name="twitter:description" content="Conecte-se com sua essência, seus ciclos e a força que reside em você. Descubra a beleza da sua jornada e receba novidades sobre mentorias e workshops.">
    <meta name="twitter:image" content="https://placehold.co/1200x630/e879f9/ffffff?text=Despertar+do+Poder+Feminino">
</head>
<body class="bg-fce4ec text-pink-900 flex items-center justify-center min-h-screen p-4">

    <!-- Main Container -->
    <div id="formContainer" class="bg-white rounded-2xl shadow-xl max-w-lg w-full p-8 md:p-12 space-y-8">
        <!-- Header Section -->
        <header class="text-center">
            <h1 class="text-3xl md:text-4xl font-bold text-pink-700">Despertar do Poder Feminino</h1>
            <p class="mt-2 text-pink-800 text-lg">
                Conecte-se com sua essência, seus ciclos e sua força interior.
            </p>
            <p class="mt-4 text-pink-600">
                Preencha o formulário abaixo para receber mais informações e novidades sobre Mentoria e Workshops.
            </p>
        </header>

        <!-- Form Section -->
        <form id="leadForm" class="space-y-6">
            <!-- Name Field -->
            <div>
                <label for="name" class="block text-sm font-medium text-pink-700">Nome completo</label>
                <input type="text" id="name" name="name" required class="mt-1 block w-full px-4 py-2 border border-pink-300 rounded-lg shadow-sm focus:ring-pink-500 focus:border-pink-500">
            </div>

            <!-- Email Field -->
            <div>
                <label for="email" class="block text-sm font-medium text-pink-700">E-mail</label>
                <input type="email" id="email" name="email" required class="mt-1 block w-full px-4 py-2 border border-pink-300 rounded-lg shadow-sm focus:ring-pink-500 focus:border-pink-500">
            </div>

            <!-- WhatsApp Field -->
            <div>
                <label for="whatsapp" class="block text-sm font-medium text-pink-700">WhatsApp (com DDD)</label>
                <input type="tel" id="whatsapp" name="whatsapp" required class="mt-1 block w-full px-4 py-2 border border-pink-300 rounded-lg shadow-sm focus:ring-pink-500 focus:border-pink-500">
            </div>

            <!-- Submit Button -->
            <div class="pt-4">
                <button type="submit" class="w-full bg-pink-600 text-white font-semibold py-3 px-4 rounded-lg shadow-md hover:bg-pink-700 focus:outline-none focus:ring-2 focus:ring-pink-500 focus:ring-offset-2 transition-colors">
                    Quero saber mais
                </button>
            </div>
        </form>
        <div id="loading" class="text-center text-pink-700 hidden">
            <p>Enviando...</p>
        </div>
        <div id="error" class="text-center text-red-600 hidden">
            <p>Ocorreu um erro ao enviar os dados. Por favor, tente novamente.</p>
        </div>
    </div>

    <!-- Thank You Message -->
    <div id="thankYouMessage" class="bg-white rounded-2xl shadow-xl max-w-lg w-full p-8 md:p-12 text-center space-y-8 hidden">
        <header class="text-center">
            <h1 class="text-4xl md:text-5xl font-bold text-pink-700">Obrigada!</h1>
            <p class="mt-4 text-pink-800 text-lg">
                Sua inscrição foi realizada com sucesso.
            </p>
        </header>

        <section class="space-y-4">
            <p class="text-pink-600">
                Para não perder nenhuma novidade e fazer parte da nossa comunidade, entre no nosso grupo do WhatsApp:
            </p>
            <a href="https://chat.whatsapp.com/K4CPymPxvOZ1ocZViYVdgB" target="_blank" class="inline-block bg-green-500 text-white font-semibold py-3 px-6 rounded-lg shadow-md hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-400 focus:ring-offset-2 transition-colors">
                Entrar no Grupo do WhatsApp
            </a>
        </section>
    </div>

    <!-- JavaScript for Firebase and Form Submission -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getFirestore, collection, addDoc, setLogLevel } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Set log level for debugging
        setLogLevel('debug');

        // Your Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyADf_4V0p6rA0DTNk0xOAPotItlXQFoNcA",
            authDomain: "capta-de-leads.firebaseapp.com",
            projectId: "capta-de-leads",
            storageBucket: "capta-de-leads.firebasestorage.app",
            messagingSenderId: "245979849278",
            appId: "1:245979849278:web:42433283249dad89e0e76f",
            measurementId: "G-C63BZBPEEV"
        };

        let db;

        // Function to initialize Firebase
        const initFirebase = () => {
            try {
                const app = initializeApp(firebaseConfig);
                db = getFirestore(app);
                console.log("Firebase initialized successfully.");
            } catch (error) {
                console.error("Error initializing Firebase:", error);
            }
        };

        // Initialize Firebase on window load
        window.addEventListener('load', initFirebase);

        // Get the form, loading, error, and submit button elements
        const formContainer = document.getElementById('formContainer');
        const thankYouMessage = document.getElementById('thankYouMessage');
        const form = document.getElementById('leadForm');
        const loading = document.getElementById('loading');
        const errorMsg = document.getElementById('error');
        const submitButton = form.querySelector('button[type="submit"]');

        // Handle form submission
        form.addEventListener('submit', async function(event) {
            // Prevent the default form submission behavior
            event.preventDefault();

            // Hide previous messages and show loading
            loading.classList.remove('hidden');
            errorMsg.classList.add('hidden');
            submitButton.disabled = true;

            // Get form data
            const formData = new FormData(form);
            const data = Object.fromEntries(formData.entries());

            try {
                if (!db) {
                    throw new Error("Firestore is not initialized.");
                }

                // Reference to the leads collection
                const leadsCollection = collection(db, "leads");
                
                // Add the new lead document to Firestore
                await addDoc(leadsCollection, {
                    ...data,
                    timestamp: new Date()
                });

                console.log("Lead data saved successfully!");
                loading.classList.add('hidden');
                form.reset();
                
                // Hide the form container and show the thank you message
                formContainer.classList.add('hidden');
                thankYouMessage.classList.remove('hidden');

                /*
                * INFORMAÇÕES IMPORTANTES SOBRE O ENVIO DE E-MAIL:
                * Para enviar um e-mail automaticamente após a inscrição, você precisa de uma função de backend.
                * A melhor forma de fazer isso com o Firebase é usando o Firebase Functions.
                * Você criaria uma função que é acionada (trigger) toda vez que um novo documento é adicionado
                * à sua coleção 'leads' no Firestore. Essa função conteria a lógica para enviar o e-mail usando
                * um serviço como o Nodemailer (para SMTP) ou um provedor como o SendGrid.
                *
                * Exemplo simplificado de como seria a estrutura da função no Firebase Functions:
                * exports.sendEmailOnNewLead = functions.firestore
                * .document('leads/{leadId}')
                * .onCreate((snap, context) => {
                * const leadData = snap.data();
                * // Lógica para enviar o e-mail usando leadData.email
                * });
                */
            } catch (err) {
                console.error("Error saving data:", err);
                loading.classList.add('hidden');
                errorMsg.classList.remove('hidden');
            } finally {
                submitButton.disabled = false;
            }
        });
    </script>
</body>
</html>
